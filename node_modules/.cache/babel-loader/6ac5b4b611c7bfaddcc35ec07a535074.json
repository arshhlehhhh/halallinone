{"remainingRequest":"C:\\Users\\Ashley Lau\\Documents\\GitHub\\halallinone-prod\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Ashley Lau\\Documents\\GitHub\\halallinone-prod\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Ashley Lau\\Documents\\GitHub\\halallinone-prod\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Ashley Lau\\Documents\\GitHub\\halallinone-prod\\src\\views\\Settings.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Ashley Lau\\Documents\\GitHub\\halallinone-prod\\src\\views\\Settings.vue","mtime":1605374709686},{"path":"C:\\Users\\Ashley Lau\\Documents\\GitHub\\halallinone-prod\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Ashley Lau\\Documents\\GitHub\\halallinone-prod\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Ashley Lau\\Documents\\GitHub\\halallinone-prod\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Ashley Lau\\Documents\\GitHub\\halallinone-prod\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU2V0dGluZ3MnLAogIGNvbXBvbmVudHM6IHt9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByZXNldFBhc3N3b3JkOiB7CiAgICAgICAgT2xkUGFzc3dvcmQ6ICcnLAogICAgICAgIE5ld1Bhc3N3b3JkOiAnJywKICAgICAgICBDb25maXJtUGFzc3dvcmQ6ICcnCiAgICAgIH0sCiAgICAgIGVycm9yOiAnJywKICAgICAgc3VjY2VzczogJycKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLiRzZXNzaW9uLmV4aXN0cygpKQogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLiRzZXNzaW9uLmdldCgndXNlcm5hbWUnKSkKICAgICAgLy8gY29uc29sZS5sb2codGhpcy5yZXNldFBhc3N3b3JkLk9sZFBhc3N3b3JkKQogICAgICB2YXIgTmV3UGFzc3dvcmQgPSB0aGlzLnJlc2V0UGFzc3dvcmQuTmV3UGFzc3dvcmQ7CiAgICAgIHZhciBDb25maXJtUGFzc3dvcmQgPSB0aGlzLnJlc2V0UGFzc3dvcmQuQ29uZmlybVBhc3N3b3JkOwoKICAgICAgaWYgKE5ld1Bhc3N3b3JkICE9PSBDb25maXJtUGFzc3dvcmQpIHsKICAgICAgICB0aGlzLmVycm9yID0gJ1lvdXIgTmV3IFBhc3N3b3JkIGRvZXMgbm90IG1hdGNoIHlvdXIgQ29uZmlybWVkIFBhc3N3b3JkISc7CiAgICAgIH0KCiAgICAgIHZhciBvbGRjcnlwdG9PYmplY3QgPSBWdWUuQ3J5cHRvSlMuU0hBMjU2KHRoaXMucmVzZXRQYXNzd29yZC5PbGRQYXNzd29yZCkudG9TdHJpbmcoKTsKICAgICAgdmFyIG5ld2NyeXB0b09iamVjdCA9IFZ1ZS5DcnlwdG9KUy5TSEEyNTYodGhpcy5yZXNldFBhc3N3b3JkLk5ld1Bhc3N3b3JkKS50b1N0cmluZygpOyAvLyBjb25zb2xlLmxvZyhvbGRjcnlwdG9PYmplY3QpCiAgICAgIC8vIGNvbnNvbGUubG9nKG5ld2NyeXB0b09iamVjdCkKCiAgICAgIGF4aW9zLmdldCgnaHR0cHM6Ly93YWQyLWhhbGxhbGxpbm9uZS5ldC5yLmFwcHNwb3QuY29tL3VzZXIvZ2V0L3VzZXJuYW1lPScgKyB0aGlzLiRzZXNzaW9uLmdldCgndXNlcm5hbWUnKSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKQogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEuVXNlclswXS5wYXNzd29yZCkKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5Vc2VyWzBdLnBhc3N3b3JkID09PSBvbGRjcnlwdG9PYmplY3QpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdZRVMnKTsKCiAgICAgICAgICBpZiAoTmV3UGFzc3dvcmQgPT09IENvbmZpcm1QYXNzd29yZCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygneWVzeWVzJyk7CiAgICAgICAgICAgIHZhciB1cmwgPSAnaHR0cHM6Ly93YWQyLWhhbGxhbGxpbm9uZS5ldC5yLmFwcHNwb3QuY29tL3VzZXIvY2hhbmdlcGFzc3dvcmQnOwogICAgICAgICAgICB2YXIgYXV0aCA9IHsKICAgICAgICAgICAgICB1c2VybmFtZTogX3RoaXMuJHNlc3Npb24uZ2V0KCd1c2VybmFtZScpLAogICAgICAgICAgICAgIHBhc3N3b3JkOiBuZXdjcnlwdG9PYmplY3QKICAgICAgICAgICAgfTsKICAgICAgICAgICAgYXhpb3MucG9zdCh1cmwsIGF1dGgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzcG9uc2Uuc3RhdHVzKQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX3RoaXMuc3VjY2VzcyA9ICdQYXNzd29yZCBDaGFuZ2UgU3VjY2Vzc2Z1bCEnOwogICAgICAgICAgICBfdGhpcy5lcnJvciA9ICcnOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy5lcnJvciA9ICdZb3VyIE9sZCBQYXNzd29yZCB5b3UgaGF2ZSBlbnRlcmVkIGlzIGluY29ycmVjdC4nOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiB0aGlzLmVycm9yOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Settings.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,GAAA,MAAA,KAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,UAAA,EAAA,EAFA;AAIA,EAAA,IAJA,kBAIA;AACA,WAAA;AACA,MAAA,aAAA,EAAA;AACA,QAAA,WAAA,EAAA,EADA;AAEA,QAAA,WAAA,EAAA,EAFA;AAGA,QAAA,eAAA,EAAA;AAHA,OADA;AAMA,MAAA,KAAA,EAAA,EANA;AAOA,MAAA,OAAA,EAAA;AAPA,KAAA;AASA,GAdA;AAeA,EAAA,OAAA,EAAA;AACA,IAAA,KADA,mBACA;AAAA;;AACA;AACA;AACA;AACA,UAAA,WAAA,GAAA,KAAA,aAAA,CAAA,WAAA;AACA,UAAA,eAAA,GAAA,KAAA,aAAA,CAAA,eAAA;;AACA,UAAA,WAAA,KAAA,eAAA,EAAA;AACA,aAAA,KAAA,GAAA,2DAAA;AACA;;AACA,UAAA,eAAA,GAAA,GAAA,CAAA,QAAA,CAAA,MAAA,CAAA,KAAA,aAAA,CAAA,WAAA,EAAA,QAAA,EAAA;AACA,UAAA,eAAA,GAAA,GAAA,CAAA,QAAA,CAAA,MAAA,CAAA,KAAA,aAAA,CAAA,WAAA,EAAA,QAAA,EAAA,CAVA,CAWA;AACA;;AACA,MAAA,KAAA,CACA,GADA,CACA,kEAAA,KAAA,QAAA,CAAA,GAAA,CAAA,UAAA,CADA,EAEA,IAFA,CAEA,UAAA,QAAA,EAAA;AACA;AACA;AACA,YAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,CAAA,EAAA,QAAA,KAAA,eAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,KAAA;;AACA,cAAA,WAAA,KAAA,eAAA,EAAA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,QAAA;AACA,gBAAA,GAAA,GAAA,gEAAA;AACA,gBAAA,IAAA,GAAA;AAAA,cAAA,QAAA,EAAA,KAAA,CAAA,QAAA,CAAA,GAAA,CAAA,UAAA,CAAA;AAAA,cAAA,QAAA,EAAA;AAAA,aAAA;AACA,YAAA,KAAA,CAAA,IAAA,CAAA,GAAA,EAAA,IAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA;AACA,cAAA,OAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA;AACA,aAHA;AAKA,YAAA,KAAA,CAAA,OAAA,GAAA,6BAAA;AACA,YAAA,KAAA,CAAA,KAAA,GAAA,EAAA;AACA;AACA,SAdA,MAcA;AACA,UAAA,KAAA,CAAA,KAAA,GAAA,kDAAA;AACA;AACA,OAtBA;AAuBA,aAAA,KAAA,KAAA;AACA;AAtCA;AAfA,CAAA","sourcesContent":["<template>\r\n  <b-row class=\"settings\">\r\n    <b-col md=\"2\" class=\"green\"></b-col>\r\n    <b-col>\r\n      <div class=\"title\">\r\n        <img src=\"../assets/logo.png\">\r\n      </div>\r\n      <div class=\"password-content\">\r\n        <b-alert> {{error}} </b-alert>\r\n        <div>\r\n          <h2>Reset Password</h2>\r\n          <h6> Need to reset your password? Fill in the form here so you can reset your password and explore all the\r\n            delicious halal food once more.</h6>\r\n          <b-form v-on:submit.prevent=\"reset()\">\r\n            <b-row class=\"my-1\">\r\n              <b-col sm=\"2\">\r\n                <label for=\"OldPassword\">Old Password:</label>\r\n              </b-col>\r\n              <b-col sm=\"10\">\r\n                <b-form-input id=\"OldPassword\" placeholder=\"Old Password\" v-model=\"resetPassword.OldPassword\">\r\n                </b-form-input>\r\n              </b-col>\r\n            </b-row>\r\n            <b-row class=\"my-1\">\r\n              <b-col sm=\"2\">\r\n                <label for=\"NewPassword\">New Password:</label>\r\n              </b-col>\r\n              <b-col sm=\"10\">\r\n                <b-form-input id=\"NewPassword\" placeholder=\"New Password\" v-model=\"resetPassword.NewPassword\">\r\n                </b-form-input>\r\n              </b-col>\r\n            </b-row>\r\n            <b-row class=\"my-1\">\r\n              <b-col sm=\"2\">\r\n                <label for=\"ConfirmPassword\">Confirm New Password: </label>\r\n              </b-col>\r\n              <b-col sm=\"10\">\r\n                <b-form-input id=\"Confirm Password\" placeholder=\"Confirm New Password\"\r\n                  v-model=\"resetPassword.ConfirmPassword\"></b-form-input>\r\n              </b-col>\r\n            </b-row>\r\n            <div>\r\n              <b-alert show variant=\"danger\" v-if=\"error\" class=\"text-center\">{{ error }}</b-alert>\r\n            </div>\r\n            <div>\r\n              <b-alert show variant=\"success\" v-if=\"success\" class=\"text-center\">{{ success }}</b-alert>\r\n            </div>\r\n            <b-button variant=\"success\" style=\"width:100%;\" type=\"submit\">Reset your Password</b-button>\r\n          </b-form>\r\n        <h5> Have you forgotten your old password? No worries! Just click here to reset your password through email!</h5>\r\n        <b-button v-on:submit=\"emailreset()\" style=\"background-color: #155C2D ; width:100%\">Reset through email!</b-button>\r\n        <br>\r\n        <br>\r\n      </div>\r\n      </div>\r\n    </b-col>\r\n    <b-col md=\"2\" class=\"green\"></b-col>\r\n  </b-row>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport Vue from 'vue'\r\n\r\nexport default {\r\n  name: 'Settings',\r\n  components: {\r\n  },\r\n  data () {\r\n    return {\r\n      resetPassword: {\r\n        OldPassword: '',\r\n        NewPassword: '',\r\n        ConfirmPassword: ''\r\n      },\r\n      error: '',\r\n      success: ''\r\n    }\r\n  },\r\n  methods: {\r\n    reset () {\r\n      // console.log(this.$session.exists())\r\n      // console.log(this.$session.get('username'))\r\n      // console.log(this.resetPassword.OldPassword)\r\n      var NewPassword = this.resetPassword.NewPassword\r\n      var ConfirmPassword = this.resetPassword.ConfirmPassword\r\n      if (NewPassword !== ConfirmPassword) {\r\n        this.error = 'Your New Password does not match your Confirmed Password!'\r\n      }\r\n      var oldcryptoObject = Vue.CryptoJS.SHA256(this.resetPassword.OldPassword).toString()\r\n      var newcryptoObject = Vue.CryptoJS.SHA256(this.resetPassword.NewPassword).toString()\r\n      // console.log(oldcryptoObject)\r\n      // console.log(newcryptoObject)\r\n      axios\r\n        .get('https://wad2-hallallinone.et.r.appspot.com/user/get/username=' + this.$session.get('username'))\r\n        .then((response) => {\r\n          // console.log(response.data)\r\n          // console.log(response.data.User[0].password)\r\n          if (response.data.User[0].password === oldcryptoObject) {\r\n            console.log('YES')\r\n            if (NewPassword === ConfirmPassword) {\r\n              console.log('yesyes')\r\n              const url = 'https://wad2-hallallinone.et.r.appspot.com/user/changepassword'\r\n              const auth = { username: this.$session.get('username'), password: newcryptoObject }\r\n              axios.post(url, auth).then((response) => {\r\n                // console.log(response.status)\r\n                console.log(response.data)\r\n              }\r\n              )\r\n              this.success = 'Password Change Successful!'\r\n              this.error = ''\r\n            }\r\n          } else {\r\n            this.error = 'Your Old Password you have entered is incorrect.'\r\n          }\r\n        })\r\n      return this.error\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"sourceRoot":"src/views"}]}